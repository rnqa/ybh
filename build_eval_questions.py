#!/usr/bin/env python3
from __future__ import annotations

import json
from pathlib import Path


DOMAINS = [
    {
        "name": "Уголовное право (УК РФ)",
        "law_hints": ["UK"],
        "theory": [
            ("Что такое необходимая оборона по УК РФ?", ["необходим", "оборон"]),
            ("Какие формы вины закреплены в УК РФ?", ["вина", "умыс"]),
            ("Что такое рецидив преступлений по УК РФ?", ["рецидив", "преступлен"]),
            ("Какие категории преступлений выделяет УК РФ?", ["категор", "тяжест"]),
            ("Когда возможно освобождение от уголовной ответственности?", ["освобожден", "ответствен"]),
        ],
        "cases": [
            ("Задача: Иван тайно похитил телефон в магазине. Как квалифицировать деяние по УК РФ?", ["краж", "тайн"]),
            ("Задача: Водитель в состоянии опьянения причинил тяжкий вред в ДТП. Какая квалификация по УК РФ?", ["опьян", "дтп"]),
            ("Задача: Должностное лицо получило деньги за совершение действий. Какая статья УК РФ применима?", ["взятк", "должност"]),
            ("Задача: Группа лиц заранее договорилась о разбойном нападении. Какой признак учесть?", ["групп", "разбой"]),
            ("Задача: Лицо оскорбило представителя власти при исполнении. Какая норма УК РФ применима?", ["оскорб", "власт"]),
        ],
    },
    {
        "name": "Гражданское право (ГК РФ)",
        "law_hints": ["GK"],
        "theory": [
            ("Что такое неустойка по ГК РФ?", ["неустойк", "штраф"]),
            ("Что такое исковая давность и каков общий срок по ГК РФ?", ["исков", "давност"]),
            ("Какие способы обеспечения обязательств предусмотрены ГК РФ?", ["обеспечен", "обязательств"]),
            ("Чем отличаются ничтожные и оспоримые сделки по ГК РФ?", ["ничтожн", "оспорим"]),
            ("Что такое виндикационный иск по ГК РФ?", ["виндикац", "владен"]),
        ],
        "cases": [
            ("Задача: Продавец просрочил поставку товара. Какие последствия по ГК РФ?", ["поставк", "просроч"]),
            ("Задача: Договор заключен устно, хотя требуется письменная форма. Что с действительностью сделки?", ["форм", "сделк"]),
            ("Задача: Покупатель обнаружил существенные недостатки товара. Какие права у него по ГК РФ?", ["недостатк", "товар"]),
            ("Задача: Должник частично исполнил обязательство, кредитор понес убытки. Можно ли взыскать убытки сверх неустойки?", ["убытк", "неустойк"]),
            ("Задача: Арендатор передал имущество в субаренду без согласия собственника. Какие последствия?", ["субаренд", "аренд"]),
        ],
    },
    {
        "name": "Арбитражный процесс (АПК РФ)",
        "law_hints": ["APK"],
        "theory": [
            ("Какие требования к исковому заявлению установлены АПК РФ?", ["исков", "заявлен"]),
            ("Когда применяются обеспечительные меры в арбитражном процессе?", ["обеспечител", "мер"]),
            ("Каков порядок апелляционного обжалования решения по АПК РФ?", ["апелляц", "обжалован"]),
            ("Когда арбитражный суд оставляет иск без рассмотрения?", ["без", "рассмотрен"]),
            ("Как распределяются судебные расходы в арбитражном процессе?", ["судебн", "расход"]),
        ],
        "cases": [
            ("Задача: Истец не направил копию иска ответчику. Что сделает суд по АПК РФ?", ["копи", "ответчик"]),
            ("Задача: Ответчик заявил о пропуске исковой давности. Как это учитывается по АПК РФ?", ["давност", "заяв"]),
            ("Задача: Стороны хотят утвердить мировое соглашение в апелляции. Допустимо ли это?", ["миров", "соглашен"]),
            ("Задача: Истец изменил основание иска в ходе процесса. В каких пределах это возможно?", ["измен", "основан"]),
            ("Задача: Сторона не была извещена о заседании. Основание ли это для отмены решения?", ["извещен", "отмен"]),
        ],
    },
    {
        "name": "Административная ответственность (КоАП РФ)",
        "law_hints": ["KOAP"],
        "theory": [
            ("Что такое административное правонарушение по КоАП РФ?", ["правонаруш", "состав"]),
            ("Какие сроки давности привлечения предусмотрены КоАП РФ?", ["срок", "давност"]),
            ("В каких случаях допускается административное задержание?", ["задержан", "административ"]),
            ("Как обжалуется постановление по делу об административном правонарушении?", ["обжалован", "постановлен"]),
            ("Какие обстоятельства исключают производство по делу по КоАП РФ?", ["исключ", "производств"]),
        ],
        "cases": [
            ("Задача: Водитель отказался от медосвидетельствования. Какая ответственность по КоАП РФ?", ["медосвидетельств", "водител"]),
            ("Задача: Протокол составлен с нарушением обязательных реквизитов. Как это влияет на дело?", ["протокол", "реквизит"]),
            ("Задача: Штраф оплачен с пропуском срока. Какие последствия по КоАП РФ?", ["штраф", "оплат"]),
            ("Задача: Лицо не уведомили о рассмотрении дела, но постановление вынесли. Законно ли это?", ["уведом", "постановлен"]),
            ("Задача: Административное правонарушение совершил несовершеннолетний. Какие особенности?", ["несовершеннолет", "ответствен"]),
        ],
    },
    {
        "name": "Трудовое право (ТК РФ)",
        "law_hints": ["TK"],
        "theory": [
            ("Какие основания увольнения по инициативе работодателя предусмотрены ТК РФ?", ["увольнен", "работодател"]),
            ("Каковы обязательные условия трудового договора по ТК РФ?", ["трудов", "договор"]),
            ("Как оплачивается сверхурочная работа по ТК РФ?", ["сверхуроч", "оплат"]),
            ("Какие гарантии установлены для беременных работниц по ТК РФ?", ["беремен", "гарант"]),
            ("Когда наступает полная материальная ответственность работника?", ["материальн", "ответствен"]),
        ],
        "cases": [
            ("Задача: Работник отсутствовал на работе весь день без уважительных причин. Как оформить увольнение?", ["прогул", "увольнен"]),
            ("Задача: Работодатель задержал выплату зарплаты на 20 дней. Какие права у работника?", ["зарплат", "задерж"]),
            ("Задача: Работника перевели на другую должность без согласия. Законно ли это по ТК РФ?", ["перевод", "соглас"]),
            ("Задача: Работодатель установил испытательный срок 6 месяцев обычному специалисту. Допустимо ли это?", ["испытательн", "срок"]),
            ("Задача: Работник подал заявление об увольнении и передумал. Может ли отозвать заявление?", ["заявлен", "отозв"]),
        ],
    },
    {
        "name": "Семейное право (СК РФ)",
        "law_hints": ["SK"],
        "theory": [
            ("Каков порядок заключения брака и препятствия к браку по СК РФ?", ["брак", "препятств"]),
            ("Как делится общее имущество супругов при разводе?", ["имуществ", "супруг"]),
            ("Кто и в каком размере обязан уплачивать алименты на несовершеннолетних детей?", ["алим", "дет"]),
            ("В каких случаях возможно лишение родительских прав?", ["лишен", "родительск"]),
            ("Как устанавливается отцовство в добровольном и судебном порядке?", ["отцовств", "установлен"]),
        ],
        "cases": [
            ("Задача: Супруги хотят заключить брачный договор после регистрации брака. Допустимо ли это?", ["брачн", "договор"]),
            ("Задача: Один супруг продал общее имущество без согласия второго. Что можно сделать?", ["соглас", "имуществ"]),
            ("Задача: Родитель уклоняется от уплаты алиментов и скрывает доход. Какие меры возможны?", ["алим", "доход"]),
            ("Задача: Суд определяет место жительства ребенка после развода. Какие критерии учитываются?", ["мест", "жительств", "ребенк"]),
            ("Задача: Бывший супруг требует алименты на свое содержание. Когда это возможно по СК РФ?", ["содержан", "бывш"]),
        ],
    },
    {
        "name": "Жилищное право (ЖК РФ)",
        "law_hints": ["JK"],
        "theory": [
            ("Какие права и обязанности собственника жилого помещения по ЖК РФ?", ["собственник", "жил"]),
            ("Каков порядок общего собрания собственников МКД?", ["общ", "собран", "собственник"]),
            ("Как перевести жилое помещение в нежилое?", ["перевод", "нежил"]),
            ("Что входит в состав общего имущества в многоквартирном доме?", ["общ", "имуществ"]),
            ("Каковы основания выселения из жилого помещения по ЖК РФ?", ["выселен", "жил"]),
        ],
        "cases": [
            ("Задача: Наниматель по соцнайму 8 месяцев не платит за коммунальные услуги. Какие последствия?", ["соцнайм", "коммунальн"]),
            ("Задача: УК повысила тариф без решения общего собрания. Какие действия жильцов?", ["ук", "тариф"]),
            ("Задача: Собственник сделал перепланировку без согласования. Какие правовые последствия?", ["перепланировк", "согласован"]),
            ("Задача: Протекает крыша, а УК бездействует. Как защищать права собственника?", ["ук", "крыша", "недостатк"]),
            ("Задача: Сосед систематически нарушает тишину ночью. Какие юридические инструменты есть?", ["тишин", "ноч"]),
        ],
    },
    {
        "name": "Налоговое право (НК РФ)",
        "law_hints": ["NK"],
        "theory": [
            ("Какие элементы налогообложения должны быть определены законом по НК РФ?", ["элемент", "налогооблож"]),
            ("Что такое налоговая база и как она определяется по НК РФ?", ["налогов", "баз"]),
            ("Как проводится камеральная и выездная налоговая проверка?", ["камеральн", "выездн", "проверк"]),
            ("Когда возникает обязанность по уплате транспортного налога?", ["транспортн", "налог"]),
            ("Какие основания для отсрочки или рассрочки по уплате налога?", ["отсрочк", "рассрочк"]),
        ],
        "cases": [
            ("Задача: ИП на УСН пропустил срок сдачи декларации. Какие последствия по НК РФ?", ["усн", "декларац"]),
            ("Задача: Организация занизила НДС в декларации. Какая ответственность предусмотрена?", ["ндс", "декларац"]),
            ("Задача: Налогоплательщик не согласен с решением инспекции. Какой порядок обжалования?", ["обжалован", "инспекц"]),
            ("Задача: Компания не удержала НДФЛ с дохода работника. Какие риски налогового агента?", ["ндфл", "агент"]),
            ("Задача: Налоговый орган заблокировал счет компании. Когда это допустимо?", ["блокировк", "счет"]),
        ],
    },
    {
        "name": "Земельное право (ЗК РФ)",
        "law_hints": ["ZK"],
        "theory": [
            ("Какие категории земель закреплены в Земельном кодексе РФ?", ["категор", "земел"]),
            ("Что такое разрешенное использование земельного участка и как его изменить?", ["разрешен", "использован"]),
            ("Как предоставляется земельный участок из государственной собственности?", ["предоставлен", "государствен"]),
            ("Какие основания прекращения права собственности на земельный участок?", ["прекращен", "собственност"]),
            ("Как осуществляется государственный земельный надзор?", ["надзор", "земельн"]),
        ],
        "cases": [
            ("Задача: Арендатор использует участок не по целевому назначению. Какие последствия по ЗК РФ?", ["целев", "участк"]),
            ("Задача: Гражданин самовольно занял часть муниципальной земли. Какая ответственность возможна?", ["самовольн", "муниципальн"]),
            ("Задача: Собственник хочет установить сервитут для прохода соседу. Как это оформить?", ["сервитут", "проход"]),
            ("Задача: Для публичных нужд изымают участок. Какие гарантии у собственника?", ["изыма", "публичн"]),
            ("Задача: В ЕГРН ошибка в границах участка. Как исправить по земельному законодательству?", ["егрн", "границ"]),
        ],
    },
    {
        "name": "Уголовный процесс (УПК РФ)",
        "law_hints": ["UPK"],
        "theory": [
            ("Какие принципы уголовного судопроизводства закреплены в УПК РФ?", ["принцип", "судопроизводств"]),
            ("Каков порядок избрания меры пресечения в виде заключения под стражу?", ["мера", "пресечен", "страж"]),
            ("Какие права имеет потерпевший в уголовном процессе?", ["потерпевш", "прав"]),
            ("Что такое недопустимые доказательства по УПК РФ?", ["недопустим", "доказательств"]),
            ("В чем особенности особого порядка судебного разбирательства?", ["особ", "порядк"]),
        ],
        "cases": [
            ("Задача: Подозреваемого допросили без адвоката, несмотря на ходатайство о защите. Последствия по УПК РФ?", ["допрос", "адвокат"]),
            ("Задача: Следователь провел обыск без судебного решения, ссылаясь на неотложность. Как оценить законность?", ["обыск", "неотложн"]),
            ("Задача: После приговора защита выявила существенные нарушения УПК. Как обжаловать?", ["приговор", "обжалован"]),
            ("Задача: Уголовное дело приостановлено из-за розыска обвиняемого. Когда можно возобновить?", ["приостанов", "розыск"]),
            ("Задача: Обвиняемый заключил досудебное соглашение о сотрудничестве. Как это влияет на производство?", ["соглашен", "сотрудничеств"]),
        ],
    },
]


def main() -> None:
    questions = []
    qid = 1
    for domain in DOMAINS:
        items = domain["theory"] + domain["cases"]
        if len(items) != 10:
            raise ValueError(f"{domain['name']}: expected 10 items, got {len(items)}")

        for idx, (question, keywords) in enumerate(items, start=1):
            q_type = "theory" if idx <= 5 else "case"
            questions.append(
                {
                    "id": qid,
                    "domain": domain["name"],
                    "type": q_type,
                    "question": question,
                    "expected_law_hints": domain["law_hints"],
                    "expected_keywords": keywords,
                }
            )
            qid += 1

    out_path = Path("evaluation_questions_legal_ru.json")
    out_path.write_text(json.dumps(questions, ensure_ascii=False, indent=2), encoding="utf-8")
    print(f"{out_path} written: {len(questions)} questions")


if __name__ == "__main__":
    main()

